<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Liquid Glass UI - Final Pro</title>
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.5);
            --accent-color: #ff8c00;
        }

        * { 
            box-sizing: border-box; margin: 0; padding: 0; 
            font-family: -apple-system, BlinkMacSystemFont, "San Francisco", "Segoe UI", Roboto, sans-serif; 
            -webkit-tap-highlight-color: transparent; scrollbar-width: none; 
            -webkit-user-select: none;
            user-select: none;
        }
        *::-webkit-scrollbar { display: none; }

        input, textarea, select {
            -webkit-user-select: auto;
            user-select: auto;
        }

        /* –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–µ–ª–æ—á–∫–∏ —É input type="number" */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }

        body { background-color: #050508; min-height: 100vh; overflow-x: hidden; position: relative; touch-action: pan-x pan-y; }

        .liquid-bg { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; overflow: hidden; pointer-events: none; }
        .blob { position: absolute; border-radius: 50%; filter: blur(80px); animation: float 15s infinite ease-in-out alternate; opacity: 0.6; }
        .blob-1 { width: 50vw; height: 50vw; max-width: 600px; max-height: 600px; background: linear-gradient(135deg, #cc5500, #ff8c00); top: -10%; left: -10%; }
        .blob-2 { width: 60vw; height: 60vw; max-width: 700px; max-height: 700px; background: linear-gradient(135deg, #005c99, #00b4d8); bottom: -10%; right: -10%; animation-delay: -5s; }
        @keyframes float { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(50px, 80px) scale(1.1); } }

        .glass-panel { background: var(--glass-bg); backdrop-filter: blur(30px) saturate(150%); -webkit-backdrop-filter: blur(30px) saturate(150%); border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); }

        .app-container { position: relative; z-index: 10; width: 100%; max-width: 800px; margin: 0 auto; display: flex; flex-direction: column; padding: 40px 24px 140px 24px; min-height: 100vh; }
        
        .header { display: flex; justify-content: center; align-items: center; margin-bottom: 40px; padding-top: 10px; }
        .header h1 { color: var(--text-main); font-size: 16px; letter-spacing: 3px; font-weight: 600; text-transform: uppercase; }

        .view-section { display: none; flex-direction: column; animation: fadeIn 0.4s ease; flex-grow: 1; }
        .view-section.active-view { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .balance-section { text-align: center; margin-bottom: 30px; cursor: pointer; display: inline-block; align-self: center; }
        .balance-wrapper { position: relative; display: inline-flex; justify-content: center; align-items: center; }
        .balance-real, .balance-hidden { transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1); }
        .balance-real { font-size: clamp(48px, 8vw, 72px); font-weight: 700; color: var(--text-main); }
        .cents { font-size: clamp(32px, 5vw, 48px); color: var(--text-muted); }
        .balance-hidden { position: absolute; font-size: clamp(48px, 8vw, 72px); font-weight: 700; color: var(--text-main); opacity: 0; transform: scale(0.8); filter: blur(10px); pointer-events: none; }
        .balance-section.is-hidden .balance-real { opacity: 0; transform: scale(1.1); filter: blur(10px); }
        .balance-section.is-hidden .balance-hidden { opacity: 1; transform: scale(1); filter: blur(0); }

        .actions-group { display: flex; flex-direction: column; align-items: center; gap: 12px; margin-bottom: 40px; }
        .actions-pill { display: flex; justify-content: center; gap: 50px; border-radius: 100px; padding: 10px 20px; }
        .actions-labels { display: flex; justify-content: center; gap: 50px; padding: 0 20px; }
        .action-btn { width: 50px; height: 50px; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: var(--text-main); background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255,255,255,0.1); cursor: pointer; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .action-btn:hover { transform: scale(1.15); background: rgba(255, 255, 255, 0.15); box-shadow: 0 0 20px rgba(255,255,255,0.2); }
        .action-btn:active { transform: scale(0.9); transition: all 0.1s; }
        .action-btn svg { width: 22px; height: 22px; fill: none; stroke: currentColor; stroke-width: 2; }
        .action-label-wrapper { width: 50px; display: flex; justify-content: center; overflow: visible; }
        .action-label { white-space: nowrap; color: var(--text-main); font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; opacity: 0.8; }

        .transactions { border-radius: 32px; padding: 24px; flex-grow: 1; margin-bottom: 20px; }
        .transactions-title { color: var(--text-muted); font-size: 13px; font-weight: 600; letter-spacing: 2px; margin-bottom: 20px; }
        .transaction-list { display: flex; flex-direction: column; gap: 12px; }
        .transaction-item { display: flex; align-items: center; justify-content: space-between; padding: 16px; background: rgba(255, 255, 255, 0.02); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.04); cursor: pointer; transition: all 0.3s ease; }
        .transaction-item:hover { background: rgba(255, 255, 255, 0.08); transform: scale(1.02); }
        .transaction-item:active { transform: scale(0.98); }
        .tx-left { display: flex; align-items: center; gap: 16px; }
        .tx-icon { width: 44px; height: 44px; border-radius: 14px; background: rgba(255,255,255,0.1); display: flex; justify-content: center; align-items: center; font-size: 18px; }
        .tx-info h4 { color: var(--text-main); font-size: 15px; font-weight: 500; margin-bottom: 4px; }
        .tx-info p { color: var(--text-muted); font-size: 12px; }
        .tx-amount { font-size: 15px; font-weight: 600; color: var(--text-main); }

        .cards-carousel { 
            display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 20px; padding-bottom: 20px; margin: 0 -24px; padding: 0 24px; 
            cursor: grab; /* –ö—É—Ä—Å–æ—Ä –¥–ª—è –ü–ö */
        }
        .cards-carousel:active { cursor: grabbing; }
        .card-slide { scroll-snap-align: center; flex: 0 0 100%; display: flex; flex-direction: column; gap: 24px; user-select: none; }
        .credit-card { width: 100%; aspect-ratio: 1.586; border-radius: 24px; padding: 24px; display: flex; flex-direction: column; justify-content: space-between; position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 15px 35px rgba(0,0,0,0.4); }
        .card-online { background: linear-gradient(135deg, rgba(255,140,0,0.8), rgba(204,85,0,0.8)); backdrop-filter: blur(20px); }
        .card-visa { background: linear-gradient(135deg, rgba(0,180,216,0.8), rgba(0,92,153,0.8)); backdrop-filter: blur(20px); }
        .card-header { display: flex; justify-content: space-between; align-items: center; }
        .card-title { font-size: 16px; font-weight: 600; color: #fff; letter-spacing: 1px; }
        .card-logo { font-size: 24px; font-weight: bold; font-style: italic; color: #fff; }
        .card-chip { width: 45px; height: 35px; background: rgba(255,255,255,0.3); border-radius: 6px; border: 1px solid rgba(255,255,255,0.5); }
        .card-balance-lbl { font-size: 12px; opacity: 0.8; margin-top: auto; color: #fff;}
        .card-balance-val { font-size: 28px; font-weight: 700; color: #fff;}
        .card-details { border-radius: 24px; padding: 24px; display: flex; flex-direction: column; gap: 16px; pointer-events: none; }
        .detail-row { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 12px;}
        .detail-row:last-child { border-bottom: none; padding-bottom: 0; }
        .detail-label { color: var(--text-muted); font-size: 14px; }
        .detail-value { color: var(--text-main); font-weight: 600; font-size: 14px; text-align: right;}
        .detail-value.highlight { color: var(--accent-color); }
        .btn-glass { width: 100%; padding: 16px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: var(--text-main); font-size: 16px; font-weight: 600; cursor: pointer; backdrop-filter: blur(20px); transition: background 0.3s, transform 0.2s; }
        .btn-glass:hover { background: rgba(255,255,255,0.2); transform: translateY(-2px); }

        .settings-row { display: flex; justify-content: space-between; align-items: center; padding: 20px; background: rgba(255,255,255,0.02); border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); transition: background 0.2s; }
        .settings-row.clickable:hover { background: rgba(255,255,255,0.08); }
        .settings-row.clickable:active { transform: scale(0.98); }
        .settings-label { color: var(--text-main); font-size: 16px; font-weight: 500; }
        .select-glass { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: var(--text-main); padding: 8px 16px; border-radius: 12px; outline: none; font-size: 14px; cursor: pointer; }
        .select-glass option { background: #1a1a1a; color: #fff; }

        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); 
            z-index: 1000; display: flex; justify-content: center; align-items: center; padding: 20px;
            visibility: hidden; opacity: 0; pointer-events: none; 
            transition: opacity 0.25s ease, visibility 0.25s ease; /* –£–°–ö–û–†–ï–ù–û */
        }
        .modal-overlay.active { 
            visibility: visible; opacity: 1; pointer-events: auto; 
        }
        
        .modal-content { 
            width: 100%; max-width: 400px; padding: 30px; border-radius: 32px; display: flex; flex-direction: column; gap: 20px; position: relative;
            transform: scale(0.85) translateY(20px); 
            transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1); /* –£–°–ö–û–†–ï–ù–û */
        }
        .modal-overlay.active .modal-content { 
            transform: scale(1) translateY(0); 
        }
        
        .modal-close { position: absolute; top: 20px; right: 24px; background: none; border: none; color: var(--text-muted); font-size: 24px; cursor: pointer; }
        .modal-title { color: var(--text-main); font-size: 18px; font-weight: 600; text-align: center; margin-bottom: 10px;}
        .input-glass { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); padding: 16px; border-radius: 16px; color: var(--text-main); font-size: 18px; text-align: center; outline: none; transition: border-color 0.3s; }
        .input-glass:focus { border-color: var(--text-main); }
        .input-glass::placeholder { color: rgba(255,255,255,0.3); }
        .input-info { display: flex; justify-content: space-between; color: var(--text-muted); font-size: 12px; margin-top: -10px; padding: 0 10px; }
        .calc-result { text-align: center; color: var(--text-main); font-size: 24px; font-weight: 700; margin: 10px 0; }
        .calc-label { text-align: center; color: var(--text-muted); font-size: 12px; text-transform: uppercase; letter-spacing: 1px;}

        .sheet-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); 
            z-index: 1000; opacity: 0; pointer-events: none; transition: opacity 0.25s ease; /* –£–°–ö–û–†–ï–ù–û */
        }
        .sheet-overlay.active { opacity: 1; pointer-events: auto; }
        .bottom-sheet { 
            position: absolute; bottom: 0; left: 50%; width: 100%; max-width: 800px; 
            transform: translateX(-50%) translateY(100%); 
            background: var(--glass-bg); backdrop-filter: blur(40px) saturate(200%); -webkit-backdrop-filter: blur(40px) saturate(200%);
            border-top: 1px solid var(--glass-border); border-left: 1px solid var(--glass-border); border-right: 1px solid var(--glass-border);
            border-radius: 32px 32px 0 0; padding: 30px 24px 60px 24px; 
            transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1); /* –£–°–ö–û–†–ï–ù–û */
            display: flex; flex-direction: column; align-items: center;
        }
        .sheet-overlay.active .bottom-sheet { transform: translateX(-50%) translateY(0); }
        .sheet-handle { width: 50px; height: 5px; background: rgba(255,255,255,0.3); border-radius: 5px; margin-bottom: 30px; }
        .sheet-icon { width: 70px; height: 70px; font-size: 32px; border-radius: 20px; background: rgba(255,255,255,0.1); display: flex; justify-content: center; align-items: center; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .sheet-title { color: var(--text-main); font-size: 22px; font-weight: 600; margin-bottom: 5px; }
        .sheet-amount { font-size: 32px; font-weight: 700; color: var(--text-main); margin-bottom: 30px; }
        .sheet-details { width: 100%; display: flex; flex-direction: column; gap: 16px; background: rgba(255,255,255,0.02); border-radius: 24px; padding: 24px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 24px; }

        .bottom-nav-container { position: fixed; bottom: 30px; left: 0; width: 100%; display: flex; justify-content: center; z-index: 100; pointer-events: none; }
        .bottom-nav { pointer-events: auto; border-radius: 40px; padding: 12px 24px; display: flex; gap: 10px; position: relative; }
        .nav-bubble { 
            position: absolute; top: 12px; left: 24px; width: 80px; height: 56px; 
            background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.3); 
            border-radius: 30px; box-shadow: 0 0 20px rgba(255,255,255,0.1); 
            transform: translateX(0) scale(var(--loupe-scale, 1));
            transition: transform 0.4s cubic-bezier(0.25, 1.2, 0.5, 1); z-index: 1; pointer-events: none; 
        }
        .nav-item { position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 80px; height: 56px; cursor: pointer; transition: transform 0.3s; }
        .nav-item.loupe-active { transform: scale(1.15); }
        .nav-icon { font-weight: 700; font-size: 18px; color: var(--text-muted); margin-bottom: 2px; transition: color 0.3s; }
        .nav-label { color: var(--text-muted); font-size: 10px; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase; transition: color 0.3s; }
        .nav-item.active .nav-icon, .nav-item.active .nav-label { color: var(--text-main); }
    </style>
</head>
<body>

    <div class="liquid-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div class="app-container">
        <header class="header">
            <h1 id="headerTitle" data-i18n="balance">Balance</h1>
        </header>

        <div id="view-balance" class="view-section active-view">
            <div class="balance-section" id="balanceToggle">
                <div class="balance-wrapper">
                    <div class="balance-real">$1000<span class="cents">.00</span></div>
                    <div class="balance-hidden">****</div>
                </div>
            </div>

            <div class="actions-group">
                <div class="actions-pill glass-panel">
                    <div class="action-btn" onclick="openReceiveModal()"><svg viewBox="0 0 24 24"><path d="M12 5v14M19 12l-7 7-7-7"/></svg></div>
                    <div class="action-btn" onclick="openSendModal()"><svg viewBox="0 0 24 24"><path d="M12 19V5M5 12l7-7 7 7"/></svg></div>
                </div>
                <div class="actions-labels">
                    <div class="action-label-wrapper"><span class="action-label" data-i18n="receive">Receive</span></div>
                    <div class="action-label-wrapper"><span class="action-label" data-i18n="send">Send</span></div>
                </div>
            </div>

            <section class="transactions glass-panel">
                <h2 class="transactions-title" data-i18n="recent_tx">RECENT TRANSACTIONS</h2>
                <div class="transaction-list">
                    <div class="transaction-item" onclick="openTxDetail('Apple Store', 'üçé', '-$99.00', 'today_time', 'Electronics')">
                        <div class="tx-left"><div class="tx-icon">üçé</div><div class="tx-info"><h4>Apple Store</h4><p data-i18n="today_time">Today, 10:42 AM</p></div></div>
                        <div class="tx-amount">-$99.00</div>
                    </div>
                    <div class="transaction-item" onclick="openTxDetail('Starbucks', '‚òï', '-$5.40', 'yesterday_time', 'Food & Drink')">
                        <div class="tx-left"><div class="tx-icon">‚òï</div><div class="tx-info"><h4>Starbucks</h4><p data-i18n="yesterday_time">Yesterday, 08:15 AM</p></div></div>
                        <div class="tx-amount">-$5.40</div>
                    </div>
                </div>
            </section>
        </div>

        <div id="view-cards" class="view-section">
            <div class="cards-carousel" id="cardsCarousel">
                <div class="card-slide">
                    <div class="credit-card card-online"><div class="card-header"><span class="card-title" data-i18n="online_card">Online Card</span><span class="card-logo">Mastercard</span></div><div class="card-chip"></div><div><div class="card-balance-lbl" data-i18n="prepaid_balance">Prepaid Balance</div><div class="card-balance-val">$15.00</div></div></div>
                    <div class="card-details glass-panel">
                        <div class="detail-row"><span class="detail-label" data-i18n="features">Features</span><span class="detail-value" data-i18n="online_only">Online Only</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="activation_fee">Activation Fee</span><span class="detail-value highlight">$5.00</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="monthly_maint">Monthly Maintenance</span><span class="detail-value">$2.50</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="success_tx">Success Tx Fee</span><span class="detail-value">$0.50</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="declined_tx">Declined Tx Fee</span><span class="detail-value">$0.70 - $1.30</span></div>
                    </div>
                    <button class="btn-glass" data-i18n="issue_card">Issue Card</button>
                </div>
                <div class="card-slide">
                    <div class="credit-card card-visa"><div class="card-header"><span class="card-title" data-i18n="premium_card">Premium Card</span><span class="card-logo">VISA</span></div><div class="card-chip"></div><div><div class="card-balance-lbl" data-i18n="prepaid_balance">Prepaid Balance</div><div class="card-balance-val">$15.00</div></div></div>
                    <div class="card-details glass-panel">
                        <div class="detail-row"><span class="detail-label" data-i18n="features">Features</span><span class="detail-value">Google/Apple Pay, NFC</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="activation_fee">Activation Fee</span><span class="detail-value highlight">$25.00</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="monthly_maint">Monthly Maintenance</span><span class="detail-value">$5.00</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="tx_fee_up">Tx Fee (up to $50)</span><span class="detail-value">$1.00</span></div>
                        <div class="detail-row"><span class="detail-label" data-i18n="tx_fee_over">Tx Fee (over $50)</span><span class="detail-value highlight">$0.00</span></div>
                    </div>
                    <button class="btn-glass" data-i18n="issue_card">Issue Card</button>
                </div>
            </div>
        </div>

        <div id="view-settings" class="view-section">
            <div class="transactions glass-panel">
                <h2 class="transactions-title" data-i18n="preferences">PREFERENCES</h2>
                <div class="settings-row">
                    <span class="settings-label" data-i18n="language">Language</span>
                    <select class="select-glass" id="langSelect" onchange="changeLanguage()">
                        <option value="en">English</option><option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    </select>
                </div>
            </div>

            <div class="transactions glass-panel" style="margin-top: 20px;">
                <h2 class="transactions-title" data-i18n="help_center">HELP CENTER</h2>
                <div class="settings-row clickable" style="margin-bottom: 12px; cursor: pointer;" onclick="alert('FAQ opened')">
                    <span class="settings-label" data-i18n="faq">FAQ</span>
                    <span style="color: var(--text-muted); font-size: 20px;">‚Ä∫</span>
                </div>
                <div class="settings-row clickable" style="cursor: pointer;" onclick="alert('Support opened')">
                    <span class="settings-label" data-i18n="support">Support</span>
                    <span style="color: var(--text-muted); font-size: 20px;">‚Ä∫</span>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="receiveModal" onclick="closeModals(event)">
        <div class="modal-content glass-panel" id="receiveContentMain" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="forceCloseModals()">√ó</button>
            <h3 class="modal-title" data-i18n="deposit_method">Deposit Method</h3>
            <button class="btn-glass" onclick="alert('–°–ë–ü...')">–°–ë–ü</button>
            <button class="btn-glass" onclick="showCryptoFlow()">Crypto</button>
        </div>
        <div class="modal-content glass-panel" id="receiveContentCrypto" style="display: none;" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="forceCloseModals()">√ó</button>
            <h3 class="modal-title" data-i18n="crypto_deposit">Crypto Deposit</h3>
            <input type="text" inputmode="decimal" id="cryptoInput" class="input-glass" placeholder="Enter amount (USD)" />
            <div class="input-info"><span data-i18n="limits">Limits: $1 - $100,000</span><span data-i18n="fee">Fee: 7%</span></div>
            <div style="margin-top: 10px;"><div class="calc-label" data-i18n="total_receive">Total to receive</div><div class="calc-result" id="cryptoTotal">$0.00</div></div>
            <button class="btn-glass" data-i18n="continue">Continue</button>
        </div>
    </div>
    
    <div class="modal-overlay" id="sendModal" onclick="closeModals(event)">
        <div class="modal-content glass-panel" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="forceCloseModals()">√ó</button>
            <h3 class="modal-title" data-i18n="top_up_card">Top Up Card</h3>
            <div class="calc-label" data-i18n="total_balance">Total Balance</div>
            <div class="calc-result" style="margin-top:0;">$1000.00</div>
            <input type="text" inputmode="decimal" class="input-glass" id="sendInput" placeholder="Amount to send" />
            <div style="text-align: center; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 16px; margin: 10px 0;">
                <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 15px;" data-i18n="no_cards">You have no active cards to top up.</p>
                <button class="btn-glass" style="padding: 10px; font-size: 14px;" onclick="goToCards()" data-i18n="create_card">Create Card</button>
            </div>
            <button class="btn-glass" style="opacity: 0.5; pointer-events: none;" data-i18n="btn_top_up">Top Up</button>
        </div>
    </div>

    <div class="sheet-overlay" id="txDetailOverlay" onclick="closeTxDetail(event)">
        <div class="bottom-sheet" id="txBottomSheet" onclick="event.stopPropagation()">
            <div class="sheet-handle"></div>
            <div class="sheet-icon" id="txDetailIcon">üçé</div>
            <div class="sheet-title" id="txDetailTitle">Apple Store</div>
            <div class="sheet-amount" id="txDetailAmount">-$99.00</div>
            
            <div class="sheet-details">
                <div class="detail-row"><span class="detail-label" data-i18n="tx_status">Status</span><span class="detail-value" style="color: #4cd964" data-i18n="tx_completed">Completed</span></div>
                <div class="detail-row"><span class="detail-label" data-i18n="tx_date">Date</span><span class="detail-value" id="txDetailDate">Today, 10:42 AM</span></div>
                <div class="detail-row"><span class="detail-label" data-i18n="tx_category">Category</span><span class="detail-value" id="txDetailCategory">Electronics</span></div>
                <div class="detail-row"><span class="detail-label" data-i18n="tx_card">Card Used</span><span class="detail-value">** 4921</span></div>
            </div>
            <button class="btn-glass" onclick="forceCloseTxDetail()" data-i18n="tx_close">Close</button>
        </div>
    </div>

    <div class="bottom-nav-container">
        <nav class="bottom-nav glass-panel" id="mainNav">
            <div class="nav-bubble" id="navBubble"></div>
            <div class="nav-item active" id="tab-balance" onclick="switchTab(this, 'view-balance', 'balance')"><div class="nav-icon">B</div><span class="nav-label" data-i18n="tab_balance">Balance</span></div>
            <div class="nav-item" id="tab-cards" onclick="switchTab(this, 'view-cards', 'tab_cards')"><div class="nav-icon">C</div><span class="nav-label" data-i18n="tab_cards">Cards</span></div>
            <div class="nav-item" id="tab-settings" onclick="switchTab(this, 'view-settings', 'tab_settings')"><div class="nav-icon">S</div><span class="nav-label" data-i18n="tab_settings">Settings</span></div>
        </nav>
    </div>

    <script>
        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å
        const i18n = {
            en: { balance: "Balance", receive: "Receive", send: "Send", recent_tx: "RECENT TRANSACTIONS", today_time: "Today, 10:42 AM", yesterday_time: "Yesterday, 08:15 AM", online_card: "Online Card", premium_card: "Premium Card", prepaid_balance: "Prepaid Balance", features: "Features", online_only: "Online Only", activation_fee: "Activation Fee", monthly_maint: "Monthly Maint.", success_tx: "Success Tx Fee", declined_tx: "Declined Tx Fee", tx_fee_up: "Tx Fee (up to $50)", tx_fee_over: "Tx Fee (over $50)", issue_card: "Issue Card", preferences: "PREFERENCES", language: "Language", help_center: "HELP CENTER", faq: "FAQ", support: "Support", deposit_method: "Deposit Method", crypto_deposit: "Crypto Deposit", limits: "Limits: $1 - $100,000", fee: "Fee: 7%", total_receive: "Total to receive", continue: "Continue", top_up_card: "Top Up Card", total_balance: "Total Balance", no_cards: "You have no active cards to top up.", create_card: "Create Card", btn_top_up: "Top Up", tab_balance: "Balance", tab_cards: "Cards", tab_settings: "Settings", placeholder_crypto: "Enter amount (USD)", placeholder_send: "Amount to send", tx_status: "Status", tx_completed: "Completed", tx_date: "Date", tx_category: "Category", tx_card: "Card Used", tx_close: "Close" },
            ru: { balance: "–ë–∞–ª–∞–Ω—Å", receive: "–ü–æ–ª—É—á–∏—Ç—å", send: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å", recent_tx: "–ü–û–°–õ–ï–î–ù–ò–ï –û–ü–ï–†–ê–¶–ò–ò", today_time: "–°–µ–≥–æ–¥–Ω—è, 10:42", yesterday_time: "–í—á–µ—Ä–∞, 08:15", online_card: "–û–Ω–ª–∞–π–Ω –ö–∞—Ä—Ç–∞", premium_card: "–ü—Ä–µ–º–∏—É–º –ö–∞—Ä—Ç–∞", prepaid_balance: "–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞", features: "–§—É–Ω–∫—Ü–∏–∏", online_only: "–¢–æ–ª—å–∫–æ –æ–Ω–ª–∞–π–Ω", activation_fee: "–ê–∫—Ç–∏–≤–∞—Ü–∏—è", monthly_maint: "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (–º–µ—Å)", success_tx: "–£—Å–ø–µ—à–Ω–∞—è —Ç—Ä–∞–Ω–∑.", declined_tx: "–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑.", tx_fee_up: "–ö–æ–º–∏—Å—Å–∏—è (–¥–æ $50)", tx_fee_over: "–ö–æ–º–∏—Å—Å–∏—è (—Å–≤—ã—à–µ $50)", issue_card: "–û—Ñ–æ—Ä–º–∏—Ç—å –∫–∞—Ä—Ç—É", preferences: "–ù–ê–°–¢–†–û–ô–ö–ò", language: "–Ø–∑—ã–∫", help_center: "–ü–û–ú–û–©–¨", faq: "–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã", support: "–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏", deposit_method: "–°–ø–æ—Å–æ–± –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è", crypto_deposit: "–ö—Ä–∏–ø—Ç–æ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ", limits: "–õ–∏–º–∏—Ç—ã: $1 - $100,000", fee: "–ö–æ–º–∏—Å—Å–∏—è: 7%", total_receive: "–ò—Ç–æ–≥–æ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é", continue: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å", top_up_card: "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –ö–∞—Ä—Ç—É", total_balance: "–û–±—â–∏–π –±–∞–ª–∞–Ω—Å", no_cards: "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ä—Ç –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è.", create_card: "–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É", btn_top_up: "–ü–æ–ø–æ–ª–Ω–∏—Ç—å", tab_balance: "–ë–∞–ª–∞–Ω—Å", tab_cards: "–ö–∞—Ä—Ç—ã", tab_settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", placeholder_crypto: "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (USD)", placeholder_send: "–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞", tx_status: "–°—Ç–∞—Ç—É—Å", tx_completed: "–í—ã–ø–æ–ª–Ω–µ–Ω–æ", tx_date: "–î–∞—Ç–∞", tx_category: "–ö–∞—Ç–µ–≥–æ—Ä–∏—è", tx_card: "–û–ø–ª–∞—á–µ–Ω–æ —Å", tx_close: "–ó–∞–∫—Ä—ã—Ç—å" }
        };

        let currentLang = 'en';
        function changeLanguage() {
            currentLang = document.getElementById('langSelect').value;
            document.querySelectorAll('[data-i18n]').forEach(el => { if (i18n[currentLang][el.getAttribute('data-i18n')]) el.innerText = i18n[currentLang][el.getAttribute('data-i18n')]; });
            document.getElementById('cryptoInput').placeholder = i18n[currentLang].placeholder_crypto;
            document.getElementById('sendInput').placeholder = i18n[currentLang].placeholder_send;
        }

        document.getElementById('balanceToggle').addEventListener('click', function() {
            this.classList.toggle('is-hidden');
        });

        const navBar = document.getElementById('mainNav');
        const navBubble = document.getElementById('navBubble');
        const headerTitle = document.getElementById('headerTitle');
        const views = document.querySelectorAll('.view-section');
        const navItems = Array.from(document.querySelectorAll('.nav-item'));

        function switchTab(element, viewId, titleKey) {
            navItems.forEach(el => { el.classList.remove('active'); el.classList.remove('loupe-active'); });
            element.classList.add('active');
            navBubble.style.transition = 'transform 0.4s cubic-bezier(0.25, 1.2, 0.5, 1)';
            navBubble.style.transform = `translateX(${element.offsetLeft - 24}px) scale(var(--loupe-scale, 1))`;
            
            headerTitle.innerText = i18n[currentLang][titleKey] || titleKey;
            headerTitle.setAttribute('data-i18n', titleKey);
            views.forEach(view => view.classList.remove('active-view'));
            document.getElementById(viewId).classList.add('active-view');
        }

        navBar.addEventListener('touchstart', () => {
            navBubble.style.setProperty('--loupe-scale', '1.15');
            navItems.find(el => el.classList.contains('active')).classList.add('loupe-active');
        }, { passive: true });

        navBar.addEventListener('touchmove', (e) => {
            e.preventDefault();
            let x = e.touches[0].clientX - navBar.getBoundingClientRect().left;
            if (x < 64) x = 64; if (x > navBar.offsetWidth - 64) x = navBar.offsetWidth - 64;
            navBubble.style.transition = 'none';
            navBubble.style.transform = `translateX(${x - 64}px) scale(1.15)`;
            let closestItem = navItems.reduce((prev, curr) => Math.abs(curr.offsetLeft + 40 - x) < Math.abs(prev.offsetLeft + 40 - x) ? curr : prev);
            navItems.forEach(el => el.classList.remove('loupe-active'));
            closestItem.classList.add('loupe-active');
        }, { passive: false });

        navBar.addEventListener('touchend', (e) => {
            navBubble.style.setProperty('--loupe-scale', '1');
            let x = e.changedTouches[0].clientX - navBar.getBoundingClientRect().left;
            let closestItem = navItems.reduce((prev, curr) => Math.abs(curr.offsetLeft + 40 - x) < Math.abs(prev.offsetLeft + 40 - x) ? curr : prev);
            closestItem.click();
        });

        // –î—Ä–∞–≥ –∫–∞—Ä—É—Å–µ–ª–∏ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
        const carousel = document.getElementById('cardsCarousel');
        let isDown = false;
        let startX;
        let scrollLeft;

        carousel.addEventListener('mousedown', (e) => {
            isDown = true;
            carousel.style.scrollSnapType = 'none';
            startX = e.pageX - carousel.offsetLeft;
            scrollLeft = carousel.scrollLeft;
        });
        carousel.addEventListener('mouseleave', () => {
            isDown = false;
            carousel.style.scrollSnapType = 'x mandatory';
        });
        carousel.addEventListener('mouseup', () => {
            isDown = false;
            carousel.style.scrollSnapType = 'x mandatory';
        });
        carousel.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - carousel.offsetLeft;
            const walk = (x - startX) * 1.5; // –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            carousel.scrollLeft = scrollLeft - walk;
        });

        // –°—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–Ω–ø—É—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∏ 1 —Ç–æ—á–∫–∞)
        function sanitizeNumberInput(e) {
            let val = e.target.value;
            val = val.replace(/[^0-9.]/g, ''); // –£–¥–∞–ª—è–µ–º –≤—Å—ë –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä –∏ —Ç–æ—á–µ–∫
            const parts = val.split('.');
            if (parts.length > 2) {
                val = parts[0] + '.' + parts.slice(1).join(''); // –ó–∞–ø—Ä–µ—Ç –≤—Ç–æ—Ä–æ–π —Ç–æ—á–∫–∏
            }
            e.target.value = val;
        }

        const receiveModal = document.getElementById('receiveModal');
        const sendModal = document.getElementById('sendModal');
        
        function openReceiveModal() { 
            document.getElementById('receiveContentMain').style.display = 'flex'; 
            document.getElementById('receiveContentCrypto').style.display = 'none'; 
            receiveModal.classList.add('active'); 
            document.body.style.overflow = 'hidden';
        }
        function openSendModal() { 
            sendModal.classList.add('active'); 
            document.body.style.overflow = 'hidden'; 
        }
        
        function closeModals(e) {
            if (e && e.target !== receiveModal && e.target !== sendModal) return;
            forceCloseModals();
        }
        function forceCloseModals() { 
            receiveModal.classList.remove('active'); 
            sendModal.classList.remove('active'); 
            document.body.style.overflow = '';
        }
        function showCryptoFlow() { 
            document.getElementById('receiveContentMain').style.display = 'none'; 
            document.getElementById('receiveContentCrypto').style.display = 'flex'; 
        }

        document.getElementById('cryptoInput').addEventListener('input', (e) => {
            sanitizeNumberInput(e);
            let num = parseFloat(e.target.value) || 0;
            document.getElementById('cryptoTotal').innerText = `$${(num * 0.93).toFixed(2)}`;
        });
        document.getElementById('sendInput').addEventListener('input', sanitizeNumberInput);

        function goToCards() { forceCloseModals(); document.getElementById('tab-cards').click(); }

        const txOverlay = document.getElementById('txDetailOverlay');
        const txSheet = document.getElementById('txBottomSheet');
        let sheetStartY = 0; let sheetCurrentY = 0;

        function openTxDetail(title, icon, amount, dateKey, category) {
            document.getElementById('txDetailTitle').innerText = title;
            document.getElementById('txDetailIcon').innerText = icon;
            document.getElementById('txDetailAmount').innerText = amount;
            document.getElementById('txDetailDate').innerText = i18n[currentLang][dateKey];
            document.getElementById('txDetailDate').setAttribute('data-i18n', dateKey);
            document.getElementById('txDetailCategory').innerText = category;
            
            document.body.style.overflow = 'hidden'; 
            
            txSheet.style.transition = 'transform 0.4s cubic-bezier(0.32, 0.72, 0, 1)';
            txSheet.style.transform = `translateX(-50%) translateY(0)`;
            txOverlay.classList.add('active');
        }

        function closeTxDetail(e) { if (e && e.target === txOverlay) forceCloseTxDetail(); }
        function forceCloseTxDetail() { 
            txSheet.style.transition = 'transform 0.3s cubic-bezier(0.32, 0.72, 0, 1)';
            txSheet.style.transform = `translateX(-50%) translateY(100%)`;
            txOverlay.classList.remove('active'); 
            document.body.style.overflow = ''; 
        }

        txSheet.addEventListener('touchstart', (e) => {
            sheetStartY = e.touches[0].clientY;
            sheetCurrentY = sheetStartY;
            txSheet.style.transition = 'none';
        }, { passive: true });

        txSheet.addEventListener('touchmove', (e) => {
            let diff = e.touches[0].clientY - sheetStartY;
            if (diff > 0) { 
                e.preventDefault(); 
                sheetCurrentY = e.touches[0].clientY;
                txSheet.style.transform = `translateX(-50%) translateY(${diff}px)`;
            }
        }, { passive: false }); 

        txSheet.addEventListener('touchend', () => {
            let diff = sheetCurrentY - sheetStartY;
            txSheet.style.transition = 'transform 0.3s cubic-bezier(0.32, 0.72, 0, 1)';
            if (diff > 100) {
                forceCloseTxDetail();
            } else {
                txSheet.style.transform = `translateX(-50%) translateY(0)`;
            }
            sheetStartY = 0; sheetCurrentY = 0;
        });

        changeLanguage();
    </script>
</body>
</html>
